# Инструкция по запуску и эксплуатации
## Запуск
Для удобства я набросил на проект базовый Docker и небольшой утилитный градл-таск.

`gradle launch`  
Для запуска нужно запусть таск 'launch' в градле. 
Соберутся все джарники и запустится docker-compose. 
На нормальную конфигурацию времени особо не хватило, 
поэтому запущенные сервисы запустятся не с первой попытки 
(будут падать пока другие сервисы не включатся и не настроятся)

После первого запуска (если всё пройдёт хорошо) БД будет инициализирована 
и заполнена случайными клиентами. 
Также произойдёт генерация cdr и первая тарификация.

Кроме этого в таблицу пользователей (отдельная таблица от клиентов) будут
добавлены тестовые пользователи - менеджер и абонент, 
которых можно использовать для логина.

### Аккаунт менеджера
- login: manager
- password: manager

### Аккаунт абонента 
(номер телефона - 70000000000)
- login: test
- password test

## Обращение к сервисам
Обращение к сервисам происходит через gateway, 
по умолчанию настроенный на `172.25.0.101:8084`  
Документацию по запросам можно найти в [сваггере](swagger.yml)

Эндпоинты требуют аутентификацию, в случае этого проекта она реализована 
на jwt-токенах. Запрос на `/auth/login` вернёт в хэдере 
`Set-Cookie: token=...`. 
Последующие запросы должны содержать в кукисах этот токен для аутентификации.

В случае проблем можно отключить необходимость в атуентификации в конфиге
(свойство `custom.security.enabled`)

## Конфигурация
Централизованный конфиг приложения можно найти 
[здесь](../server-config/config/application.properties) 

(/server-config/config/application.properties)

На данный момент часть конфигурации по сути является хард-кодом 
(в плане связи хостов и портов с докером)